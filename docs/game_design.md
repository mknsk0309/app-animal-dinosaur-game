# どうぶつ・きょうりゅうかくれんぼ - 詳細設計書

## キャラクター設計

キャラクター情報は `data/characters.json` ファイルで管理されています。

### 動物キャラクター
- **難易度1（やさしい）**: ライオン、サル、シマウマ、イルカ、クジラ、アザラシ、ラクダ、トカゲ、サソリ、ウサギ、リス、シカ
- **難易度2（ふつう）**: トラ、ゴリラ、フクロウ、カメ、タコ、サメ、ゾウ、サイ、カンガルー、キツネ、パンダ、キリン

### 恐竜キャラクター
- **難易度2（ふつう）**: ヴェロキラプトル、パキケファロサウルス、プレシオサウルス、マンモス、パラサウロロフス、デイノニクス、アンキロサウルス
- **難易度3（むずかしい）**: ティラノサウルス、ブラキオサウルス、モササウルス、スピノサウルス、ケツァツコアトルス、プテラノドン、ステゴサウルス、トリケラトプス

## 環境（ステージ）設計

環境情報は `data/environments.json` ファイルで管理されています。

### ジャングルステージ
- **背景**: 緑豊かなジャングル、大きな木々、カラフルな花
- **背景色**: [34, 139, 34]（森林緑）
- **カード裏面**: tree1, tree2, flower
- **登場キャラクター**: ライオン、サル、シマウマ、トラ、ゴリラ、フクロウ、ヴェロキラプトル、パキケファロサウルス、ティラノサウルス、ブラキオサウルス

### 海ステージ
- **背景**: 青い海、砂浜、サンゴ礁
- **背景色**: [0, 105, 148]（海色）
- **カード裏面**: bubble, coral, seaweed
- **登場キャラクター**: イルカ、クジラ、アザラシ、カメ、タコ、サメ、プレシオサウルス、モササウルス、スピノサウルス

### 砂漠ステージ
- **背景**: 砂丘、サボテン、岩
- **背景色**: [210, 180, 140]（砂色）
- **カード裏面**: cactus, rock, sand
- **登場キャラクター**: ラクダ、トカゲ、サソリ、ゾウ、サイ、カンガルー、マンモス、パラサウロロフス、ケツァツコアトルス、プテラノドン

### 森ステージ
- **背景**: 落葉樹林、キノコ、小川
- **背景色**: [139, 69, 19]（茶色）
- **カード裏面**: mushroom, grass, flower
- **登場キャラクター**: ウサギ、リス、シカ、キツネ、パンダ、キリン、デイノニクス、アンキロサウルス、ステゴサウルス、トリケラトプス

## 難易度設定

難易度設定は `data/game_config.json` ファイルで管理されています。

### かんたん
- **カード配置**: 2×3（6枚、3ペア）
- **カードサイズ**: 140×200
- **待機時間**: 45フレーム（約0.75秒）
- **出現キャラクター**: 難易度1の動物のみ

### ふつう
- **カード配置**: 2×5（10枚、5ペア）
- **カードサイズ**: 110×160
- **待機時間**: 30フレーム（約0.5秒）
- **出現キャラクター**: 難易度1と2の動物、難易度2の恐竜

### むずかしい
- **カード配置**: 3×5（最後の行は4枚、計14枚、7ペア）
- **カードサイズ**: 110×150
- **待機時間**: 15フレーム（約0.25秒）
- **出現キャラクター**: 難易度1と2の動物、難易度2と3の恐竜

## 図鑑機能詳細設計

### 図鑑の構成
- **メイン画面**: 環境ごとにタブ分け、見つけた動物/恐竜のアイコンを表示
- **詳細画面**: キャラクターの拡大表示、簡単な説明文、鳴き声再生ボタン
- **達成度表示**: 各環境ごとの発見率、全体の発見率

### 図鑑の情報内容
- キャラクターの名前（ひらがな/カタカナ表記）
- 簡単な特徴説明（「ライオンはどうぶつの王さまだよ」など）
- 生息地や食べ物などの基本情報
- 実際の大きさ比較（お子さんとの大きさ比較など）

## シールブック機能詳細設計

### シールブックの構成
- **シール選択画面**: 獲得したシールを一覧表示
- **背景選択画面**: 様々な背景テンプレートを選択
- **編集画面**: シールの配置、サイズ変更、回転などの編集機能
- **保存/読み込み画面**: 作成したページの保存と読み込み

### シールの種類
- **通常シール**: 基本的な動物/恐竜のシール
- **キラキラシール**: 特定の条件で獲得できる特別なシール
- **アニメーションシール**: 画面上で動くシール
- **音が出るシール**: タップすると鳴き声が出るシール

### シールブックの特典
- 全ての環境をクリアすると特別な背景がアンロック
- 特定のシールの組み合わせで特別なアニメーションが発生

## UI/UX詳細設計

### メインメニュー
- **スタートボタン**: 大きく、中央に配置
- **図鑑ボタン**: 本のアイコンで表示
- **シールブックボタン**: シールのアイコンで表示
- **設定ボタン**: 歯車アイコンで表示

### 環境選択画面
- **環境ボタン**: 各環境を表すイラスト付きボタン
- **戻るボタン**: メニューに戻るボタン

### 難易度設定画面
- **難易度選択**: かんたん・ふつう・むずかしいから選択
- **難易度説明**: 各難易度の特徴を説明
- **戻るボタン**: 前の画面に戻るボタン

### ゲーム画面
- **カード**: 難易度に応じたサイズと枚数
- **環境名**: 現在プレイ中の環境名を表示
- **戻るボタン**: 環境選択画面に戻るボタン

### フィードバック演出
- **成功時**: 花火や風船、キラキラエフェクト
- **ペア発見時**: キャラクターが喜ぶアニメーション、褒める音声
- **ゲームクリア時**: 全キャラクターが集まってお祝いパレード

## 技術実装計画

### データ管理
- **JSONファイル**: 環境、キャラクター、ゲーム設定などのデータを管理
- **ConfigLoader**: JSONファイルを読み込み、キャッシュするユーティリティクラス

### クラス構成
```
app-animal-dinosaur-game/
├── game/
│   ├── game_manager.py  # ゲーム全体の管理
│   ├── environment.py   # 環境クラス
│   ├── character.py     # キャラクタークラス
│   ├── card.py          # カードクラス（予定）
│   ├── encyclopedia.py  # 図鑑クラス（予定）
│   └── sticker_book.py  # シールブッククラス（予定）
├── ui/
│   ├── button.py        # ボタンクラス
│   ├── menu.py          # メインメニュー
│   ├── environment_select.py # 環境選択画面
│   ├── difficulty_select.py # 難易度選択画面
│   ├── game_screen.py   # ゲーム画面
│   ├── encyclopedia_ui.py # 図鑑UI（開発中）
│   └── sticker_book_ui.py # シールブックUI（開発中）
└── utils/
    ├── config_loader.py # 設定ファイル読み込み
    ├── font_manager.py  # フォント管理
    └── resource_loader.py # リソース読み込み
```

## 教育的要素の実装

### 学習コンテンツ
- 動物/恐竜の基本情報（大きさ、食べ物、特徴）
- 生息環境についての簡単な説明
- 数の概念（「2匹見つけたね！」など）
- 色や形の認識（「赤いカードを選んでね」など）

### フィードバック方法
- 正解時に褒める言葉かけ
- 間違えても励ます言葉かけ
- 達成感を感じられる演出

## アクセシビリティ対応

### 操作性
- 大きなボタンと明確な視覚的フィードバック
- シンプルな操作方法（タップ/クリックのみ）
- 操作の反応速度を調整可能に

### 視覚・聴覚サポート
- 色覚特性に配慮した色使い
- テキストと音声の併用
- 音量調整機能